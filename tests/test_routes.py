import pytest
import json


@pytest.mark.parametrize(
    "amount",
    [
        ("5"), ("30"), ("45"), ("49"), ("33"), ("0"), ("22")
    ]
    )
def test_get_request(test_client, amount):
    response = test_client.get(f'/cve?amount={amount}')
    assert response.status_code == 200 and b"data" in response.data


def test_home_redirect(test_client):
    response = test_client.get(f'/')
    assert response.status_code == 302


def test_user_register(test_client):
    # https://pytest-flask.readthedocs.io/en/latest/features.html#fixtures

    username = "properUsername"
    password = "properPassword12"

    headers = {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
    }

    data = {
        'username': username,
        'password': password
    }

    # dumps - turn python object into a json string
    response = test_client.post('/user/register', data=json.dumps(data), headers=headers)
    
    assert response.status_code == 201





